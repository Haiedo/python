version: '3.8'

services:
  test:
    build: .
    environment:
      - FLASK_ENV=testing
      - DATABASE_URL=sqlite:///:memory:
      - SECRET_KEY=test-secret-key
      - JWT_SECRET_KEY=test-jwt-secret-key
    command: pytest -v --cov=app --cov-report=term --cov-report=html
    volumes:
      - .:/app
      - ./htmlcov:/app/htmlcov
